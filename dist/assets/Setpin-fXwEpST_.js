import{r as i,b as I,u as _,j as e,C as L,y as l,A as w}from"./index-DEIqmbY-.js";import{O as x}from"./otp-input-D2LM50Iq.js";const B=()=>{var h,d,f,g;const[o,N]=i.useState(""),[c,C]=i.useState(""),a=I(),j=(h=a.state)==null?void 0:h.phone_number,P=(d=a.state)==null?void 0:d.country_code,b=(f=a.state)==null?void 0:f.user_type,[m,r]=i.useState(!1),u=_(),p=(g=a.state)==null?void 0:g.token,[t,S]=i.useState(!1),y=()=>{if(t){if(o!==c){l.error("PINs do not match");return}r(!0);const s=window.fcmToken||"";console.log("Setting customer PIN with FCM Token:",s),w.post("/user/setCustomerPin",{confirm_pin:c,pin:o,fcm_token:s},{headers:{Authorization:`Bearer ${p}`}}).then(n=>{console.log(n),l.success(n.message),r(!1),u("/location",{state:{phone_number:j,country_code:P,user_type:b,token:p}})}).catch(n=>{console.log(n),l.error(n.response.data.message),r(!1)})}else S(!0)},k=s=>{N(s)},v=s=>{C(s)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute"},children:e.jsxs("button",{className:"back-btn mb-3 mt-5 px-3 py-3",style:{color:"#000"},onClick:()=>{u(-1)},children:[e.jsx(L,{})," Back"]})}),e.jsxs("div",{className:"px-5 pt-5 pb-3",children:[e.jsx("h3",{className:"head2 pt-5",children:t?"Confirm PIN":"Set Login PIN"}),e.jsx("p",{className:"text-center color-grey font-12",children:t?"Confirm your login PIN":"Set your login PIN"})]}),e.jsxs("div",{className:"otp",children:[t&&e.jsx(x,{length:6,value:c,onChange:v,className:"otp-input-container",inputClassName:"input"}),!t&&e.jsx(x,{length:6,value:o,onChange:k,className:"otp-input-container",inputClassName:"input"})]}),e.jsx("div",{className:"px-4 mt-5",children:e.jsx("button",{className:"fill_half",onClick:y,disabled:o.length!==6||m,children:m?"Setting...":t?"Confirm":"Set"})})]})};export{B as default};
