import{r,u as z,a as M,c as x,A as b,j as e,H,S as p}from"./index-DEIqmbY-.js";import{L as I}from"./LoginModal-CIJNsLlE.js";import"./Spinner-YBZ7XAN5.js";import"./index-C6PswM7T.js";function $(l=80){const[o,n]=r.useState(!1);return r.useEffect(()=>{const u=()=>{n(window.scrollY>l)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[l]),o}const q=()=>{const l=z(),{latitude:o,longitude:n,logout:u}=M(),[h,_]=r.useState([]),[g,y]=r.useState([]),[j,S]=r.useState([]),[i,L]=r.useState([]),[m,f]=r.useState(!1),N=x("banner"),d=x("categories"),v=x("popular-services"),t=x("services");r.useEffect(()=>{const s=document.querySelector("#carouselExampleIndicators");if(s&&window.bootstrap){const a=new window.bootstrap.Carousel(s,{interval:3e3,ride:"carousel",pause:!1,wrap:!0});setTimeout(()=>{try{a.cycle()}catch(c){console.warn("Carousel cycle error:",c)}},300)}},[]),r.useEffect(()=>{(o||n)&&(w(!0),w(!1),k(),C(Number(o),Number(n)))},[o,n]);const C=(s,a)=>{N.setLoading(!0),b.post("/user/userBannerImages",{latitude:s,longitude:a}).then(c=>{console.log(c),L(c.data.list)}).catch(c=>{console.log(c)}).finally(()=>{N.setLoading(!1)})},k=()=>{d.setLoading(!0),b.post("/user/getAllCategoryList",{latitude:Number(o),longitude:Number(n),filters:{search:""},pagination:{page:1,pageSize:10}}).then(s=>{console.log(s),S(s.data.list)}).catch(s=>{console.log(s)}).finally(()=>{d.setLoading(!1)})},w=s=>{const a=s?v:t;a.setLoading(!0),b.post("/user/getServiceList",{latitude:Number(o),longitude:Number(n),filters:{search:"",is_popular:s?"true":""},pagination:{page:1,pageSize:20}}).then(c=>{console.log(c),s?_(c.data.list):y(c.data.list)}).catch(c=>{console.log(c)}).finally(()=>{a.setLoading(!1)})},E=$();return e.jsxs(e.Fragment,{children:[e.jsx(H,{isMinimized:E}),e.jsxs("div",{className:"container pb-10 main-content px-3",children:[e.jsx("div",{className:"row pt-3",children:e.jsxs("div",{className:"col-12 ",children:[e.jsx(p,{show:N.loading,size:"medium",text:"Loading banners...",overlay:!0}),e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide carousel-fade","data-bs-ride":"carousel","data-bs-interval":"3000",children:[e.jsx("div",{className:"carousel-indicators",children:i==null?void 0:i.map((s,a)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":a,className:a===0?"active":"","aria-current":a===0?"true":"false","aria-label":`Slide ${a+1}`},a))}),e.jsx("div",{className:"carousel-inner",children:i==null?void 0:i.map((s,a)=>e.jsx("div",{className:a===0?"carousel-item active":"carousel-item",children:e.jsx("img",{onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`),style:{height:"240px"},src:s==null?void 0:s.banner_image_url,className:"d-block w-100",alt:"..."})},a))}),e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})]})}),e.jsx("div",{className:"row pt-4 mt-2",children:e.jsxs("div",{className:"col-12 pb-3 d-flex align-items-center justify-content-between",children:[e.jsx("p",{className:"subcats",children:"Popular Services"}),e.jsx("button",{className:"view_more",onClick:()=>l("/service-list",{state:{isPopular:!0}}),children:"View all"})]})}),e.jsxs("div",{className:"row px-1",children:[e.jsx(p,{show:v.loading,size:"medium",text:"Loading services..."}),!v.loading&&h.length===0&&e.jsx("div",{className:"col-12 ",children:e.jsx("p",{className:"font-14 weight-bold",children:"No Popular Services"})}),!v.loading&&h.length>0&&h.map(s=>e.jsx("div",{className:"col-6 px-2 ",onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`),children:e.jsxs("div",{className:"s_cards",children:[e.jsx("img",{src:s==null?void 0:s.service_image,className:"w-100 rounded-full"}),e.jsx("div",{className:"px-2 pb-2",children:e.jsx("p",{className:"ser_names",children:s==null?void 0:s.service_name})})]})},s==null?void 0:s.service_id))]}),e.jsx("div",{className:"row pt-4 mt-2",children:e.jsxs("div",{className:"col-12 pb-3 d-flex align-items-center justify-content-between",children:[e.jsx("p",{className:"subcats",children:"Browse Categories"}),e.jsx("button",{className:"view_more",onClick:()=>l("/categories-list"),children:"View More"})]})}),e.jsxs("div",{className:"row",children:[e.jsx(p,{show:d.loading,size:"medium",text:"Loading categories..."}),!d.loading&&j.length===0&&e.jsx("div",{className:"col-12",children:e.jsx("p",{className:"font-14 weight-bold",children:"No Categories"})}),!d.loading&&j.length>0&&e.jsx("div",{className:"col-12 d-flex gap-15 overflow-auto",children:j.map(s=>{var a;return e.jsxs("span",{onClick:()=>l("/service-by-cat",{state:{category:s==null?void 0:s.category_id}}),className:"d-flex direction-cloumn align-items-center",children:[e.jsx("img",{className:"small_cat_img",src:s==null?void 0:s.category_image}),e.jsx("p",{className:"font-14 mb-0 pt-1",children:((a=s==null?void 0:s.category_name)==null?void 0:a.length)>8?(s==null?void 0:s.category_name.slice(0,8))+"...":s==null?void 0:s.category_name})]},s==null?void 0:s.category_id)})})]}),e.jsx("div",{className:"row pt-4 mt-2",children:e.jsxs("div",{className:"col-12 pb-3 d-flex align-items-center justify-content-between",children:[e.jsx("p",{className:"subcats",children:"Best Services"}),e.jsx("button",{className:"view_more",onClick:()=>l("/service-list",{state:{isPopular:!1}}),children:"View More"})]})}),e.jsxs("div",{className:"row px-1",children:[e.jsx(p,{show:t.loading,size:"medium",text:"Loading services..."}),!t.loading&&g.length===0&&e.jsx("div",{className:"col-12",children:e.jsx("p",{className:"font-14 weight-bold",children:"No Services"})}),!t.loading&&g.length>0&&g.map(s=>e.jsx("div",{className:"col-6 px-2",children:e.jsxs("div",{className:"serv_cards mb-3",children:[!t.loading&&g.length===0&&e.jsx("div",{className:"col-12",children:e.jsx("p",{className:"font-14 weight-bold",children:"No Services"})}),e.jsx("img",{src:s.service_image,className:"w-100",onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`)}),e.jsxs("div",{className:"d-flex pt-3 align-items-center justify-content-between",children:[e.jsx("h3",{className:" ser_nms my-0",onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`),children:s!=null&&s.service_name?(s==null?void 0:s.service_name.length)>12?(s==null?void 0:s.service_name.slice(0,12))+"...":s==null?void 0:s.service_name:""}),e.jsxs("p",{className:"ser_rts my-0 d-flex align-items-center gap-1",onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`),children:[e.jsx("span",{children:"★"})," ",(s==null?void 0:s.avg_rating)||"0"," (",(s==null?void 0:s.total_reviews)||"0",")"]})]}),e.jsxs("p",{className:"ser_pric",onClick:()=>l(`/servicedeatils/${s==null?void 0:s.service_id}`),children:["Best Price",e.jsx("br",{}),e.jsxs("span",{children:[" ₹",s==null?void 0:s.price]})]}),e.jsx("div",{className:"booknow_btn"})]})},s==null?void 0:s.service_id))]}),e.jsx(I,{show:m,onCancel:()=>f(!1),onConfirm:()=>{u(),f(!1)}})]})]})};export{q as default};
