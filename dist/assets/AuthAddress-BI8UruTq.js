import{b as C,u as _,r as j,j as e,e as E,G as z,A as f,y as n}from"./index-Dsyms-5d.js";import{c as D,a as d,u as L,I as u,o as V}from"./index.esm-DtM1Yl6M.js";import{u as G}from"./esm-VjYAu_Ux.js";import{G as M}from"./GooglePlacesAutocomplete-BC0pORit.js";import"./index-CA4HDCCN.js";const $=()=>{var p,h,x,y,b,g;const r=(p=C().state)==null?void 0:p.address,m=_(),[l,i]=j.useState(!1),v=D({street_1:d().required("Street Address One is required"),city:d().required("City is required"),state:d().required("State is required"),zip:d().required("Zip is required").min(4,"Zip must be at least 4 characters"),country:d().required("Country is required")}),{handleSubmit:S,formState:{errors:o},control:c,setValue:a}=L({resolver:V(v)}),A=s=>{i(!0),r?f.post("/user/updateCustomerAddress",{...s,address_id:r._id}).then(t=>{console.log(t),i(!1),n.success(t.message),m("/addressdetails")}).catch(t=>{console.log(t),n.error(t.response.data.message),i(!1)}):f.post("/user/addCustomerAddress",s).then(t=>{console.log(t),i(!1),n.success(t.message),m("/addressdetails")}).catch(t=>{console.log(t),n.error(t.response.data.message),i(!1)})};j.useEffect(()=>{r&&(a("street_1",r.street_1),a("city",r.city),a("state",r.state),a("zip",r.zip),a("country",r.country))},[r]);const N=s=>{console.log("Selected Address:",s),a("street_1",s.fullAddress,{shouldValidate:!0,shouldDirty:!0}),s.city&&a("city",s.city,{shouldValidate:!0,shouldDirty:!0}),s.state&&a("state",s.state,{shouldValidate:!0,shouldDirty:!0}),s.postalCode&&a("zip",s.postalCode,{shouldValidate:!0,shouldDirty:!0}),s.country&&a("country",s.country,{shouldValidate:!0,shouldDirty:!0})},{isLoaded:q}=G({googleMapsApiKey:z,libraries:["places"]});return q?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(E,{}),e.jsx("div",{className:"main-content-service",children:e.jsxs("div",{className:"row",style:{padding:"10px"},children:[e.jsxs("div",{className:"col-12 pt-3",children:[e.jsx("label",{className:"lbl2",children:" Street Address One"}),e.jsx(M,{control:c,name:"street_1",onSelect:N,label:"",error:(h=o.street_1)==null?void 0:h.message})]}),e.jsxs("div",{className:"col-6 pt-3",children:[e.jsx("label",{className:"lbl2",children:" City"}),e.jsx(u,{control:c,name:"city",label:"",type:"text",placeholder:"Enter city",inputMode:"text",error:(x=o.city)==null?void 0:x.message,disabled:l})]}),e.jsxs("div",{className:"col-6 pt-3",children:[e.jsx("label",{className:"lbl2",children:" State"}),e.jsx(u,{control:c,name:"state",label:"",type:"text",placeholder:"Enter state",inputMode:"text",error:(y=o.state)==null?void 0:y.message,disabled:l})]}),e.jsxs("div",{className:"col-6 pt-3",children:[e.jsx("label",{className:"lbl2",children:" Zip"}),e.jsx(u,{control:c,name:"zip",label:"",type:"text",placeholder:"Enter zip",inputMode:"numeric",error:(b=o.zip)==null?void 0:b.message,disabled:l})]}),e.jsxs("div",{className:"col-6 pt-3",children:[e.jsx("label",{className:"lbl2",children:" Country"}),e.jsx(u,{control:c,name:"country",label:"",type:"text",placeholder:"Enter country",inputMode:"text",error:(g=o.country)==null?void 0:g.message,disabled:l})]}),e.jsx("div",{className:"col-12 pt-4",children:e.jsx("button",{className:"fill",onClick:S(A),disabled:l,children:l?"Saving...":"Save Address"})})]})})]})}):e.jsx("p",{children:"Loading..."})};export{$ as default};
