import{r as c,b as y,u as C,j as e,C as _,A as k,y as x}from"./index-Dsyms-5d.js";import{O as g}from"./otp-input-Dso3ECxF.js";const E=()=>{var h,m,u;const[i,j]=c.useState(""),[t,N]=c.useState(""),n=y(),a=(h=n.state)==null?void 0:h.phone_number,l=(m=n.state)==null?void 0:m.country_code,r=(u=n.state)==null?void 0:u.user_type,[p,o]=c.useState(!1),d=C(),f=s=>{j(s)},b=()=>{o(!0),k.post("/user/resetCustomerPin",{phone_number:a,country_code:l,user_type:r,otp:i,new_pin:t,confirm_pin:t,fcm_token:""}).then(s=>{console.log(s),x.success(s.message),o(!1),d("/servicemenlogin",{state:{phone_number:a,country_code:l,role:r}})}).catch(s=>{console.log(s),x.error(s.response.data.message),o(!1)})},v=s=>{N(s)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute"},children:e.jsxs("button",{className:"back-btn mb-3 mt-4 px-3 py-3",style:{color:"#000"},onClick:()=>{d(-1)},children:[e.jsx(_,{})," Back"]})}),e.jsxs("div",{className:"px-5 pt-5 pb-3",children:[e.jsx("h3",{className:"head2 pt-5",children:"Enter verification code"}),e.jsxs("p",{className:"text-center color-grey font-12",children:["We have sent you a 6 digit verification code on"," ",e.jsxs("b",{className:"",children:["+91 ",a]})]})]}),e.jsx("div",{className:"otp ",children:e.jsx(g,{length:6,onChange:f,className:"otp-input-container",inputClassName:"input"})}),e.jsx("div",{className:"px-5 pt-5 pb-3",children:e.jsx("h3",{className:"head2 pt-5",children:"Enter New PIN"})}),e.jsx("div",{className:"otp ",children:e.jsx(g,{length:6,onChange:v,className:"otp-input-container",inputClassName:"input"})}),e.jsx("div",{className:"px-4 mt-5",children:e.jsx("button",{className:"fill_half",disabled:i.length!==6||t.length!==6||p,onClick:b,children:p?"Verifying...":"Verify"})})]})};export{E as default};
