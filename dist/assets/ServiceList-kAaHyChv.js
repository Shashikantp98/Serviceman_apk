import{u as j,a as d,b as N,r as l,c as _,j as e,e as f,S as b,A as w,y as L}from"./index-DEIqmbY-.js";import{L as S}from"./LoginModal-CIJNsLlE.js";import{A as k}from"./arrow-up-right-CZV7zgvh.js";import"./Spinner-YBZ7XAN5.js";import"./index-C6PswM7T.js";const E=()=>{const a=j(),{token:i,logout:v}=d(),{isPopular:n}=N().state,{latitude:p,longitude:x}=d(),[r,g]=l.useState([]),[h,o]=l.useState(!1),c=_("service-list"),u=()=>{c.setLoading(!0),w.post("/user/getServiceList",{latitude:Number(p),longitude:Number(x),filters:{search:"",is_popular:n?"true":""},pagination:{page:1,pageSize:50}}).then(s=>{console.log(s),g(s.data.list)}).catch(s=>{console.log(s)}).finally(()=>{c.setLoading(!1)})};l.useEffect(()=>{u()},[]);const t=s=>{i=="guest"?o(!0):s.is_available?a(`/summery/${s==null?void 0:s.service_id}`):L.error(s.availability_message)};return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"container pb-10 pt-5 mt-5 px-3",children:[e.jsx("div",{className:"row px-1",children:e.jsx("div",{className:"col-12 pb-3",children:e.jsxs("p",{className:"subcats",children:[n?"Popular":"Best"," services"]})})}),e.jsxs("div",{className:"row px-1",children:[e.jsx(b,{show:c.loading,size:"medium",text:"Loading services...",overlay:!0}),!c.loading&&r.length===0&&e.jsx("div",{className:"col-12",children:e.jsx("p",{className:"font-14 weight-bold",children:"No Services"})}),r.length>0&&r.map(s=>e.jsx("div",{className:"col-6  px-2",children:e.jsxs("div",{className:"serv_cards mb-3",children:[e.jsx("img",{src:s.service_image,className:"w-100",onClick:()=>a(`/servicedeatils/${s==null?void 0:s.service_id}`)}),e.jsxs("div",{className:"d-flex pt-3 align-items-center justify-content-between",children:[e.jsx("h3",{className:" ser_nms my-0",onClick:()=>a(`/servicedeatils/${s==null?void 0:s.service_id}`),children:s!=null&&s.service_name?(s==null?void 0:s.service_name.length)>12?(s==null?void 0:s.service_name.slice(0,12))+"...":s==null?void 0:s.service_name:""}),e.jsxs("p",{className:"ser_rts my-0",onClick:()=>a(`/servicedeatils/${s==null?void 0:s.service_id}`),children:[e.jsx("span",{children:"⭐"})," ",(s==null?void 0:s.avg_rating)||"0"," (",(s==null?void 0:s.total_reviews)||"0",")"]})]}),e.jsxs("p",{className:"ser_pric",onClick:()=>a(`/servicedeatils/${s==null?void 0:s.service_id}`),children:["Best Price",e.jsx("br",{}),e.jsxs("span",{children:[" ₹",s==null?void 0:s.price]})]}),e.jsx("div",{className:"booknow_btn",children:e.jsxs("button",{onClick:()=>t(s),className:"",children:[e.jsx(k,{}),"Book Now"]})})]})},s==null?void 0:s.service_id))]}),e.jsx(S,{show:h,onCancel:()=>o(!1),onConfirm:()=>{v(),o(!1)}})]})]})};export{E as default};
