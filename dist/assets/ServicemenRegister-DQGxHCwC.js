import{u as x,b as y,r as g,j as e,C as _,A as v}from"./index-Dsyms-5d.js";import{l as j}from"./dlogo-DICp3sQV.js";import{c as k,a as r,u as S,I as N,o as w}from"./index.esm-DtM1Yl6M.js";const P=()=>{var l,m;const t=x(),a=(l=y().state)==null?void 0:l.role,[c,s]=g.useState(!1),u=k({country_code:r().default("+91"),phone_number:r().required("Phone number is required").matches(/^[6-9]\d{9,11}$/,"Invalid Phone number, Phone number must start with 6, 7, 8, or 9 and be 10 digits"),user_type:r().default(a)}),{handleSubmit:p,formState:{errors:i},control:d}=S({resolver:w(u),mode:"onSubmit"}),h=n=>{s(!0);const b=window.fcmToken||"",f={...n,fcm_token:b};v.post("/user/sendOtp",f).then(o=>{s(!1),o.data.is_existing?t("/servicemenpin",{state:{phone_number:n.phone_number,country_code:n.country_code,user_type:n.user_type}}):t("/servicemenotp",{state:{phone_number:n.phone_number,country_code:n.country_code,user_type:n.user_type}})}).catch(o=>{console.log(o),s(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute"},children:e.jsxs("button",{className:"back-btn mb-3 mt-5 px-3 py-3",style:{color:"#000"},onClick:()=>t("/servicemenlogin",{state:{role:a}}),children:[e.jsx(_,{})," Back"]})}),e.jsxs("div",{className:"h-100vh gred2 pt-5",children:[e.jsx("div",{className:"cir",children:e.jsx("img",{src:j})}),e.jsxs("div",{className:"px-4 pt-5",children:[e.jsx("h6",{children:"Enter Mobile Number"}),e.jsx(N,{control:d,name:"phone_number",label:"",type:"text",placeholder:"Enter phone number",inputMode:"numeric",maxLength:10,onKeyDown:n=>{!/[0-9]/.test(n.key)&&n.key!=="Backspace"&&n.key!=="ArrowLeft"&&n.key!=="ArrowRight"&&n.preventDefault()}}),i.phone_number&&e.jsx("p",{className:"text-danger font-12 mt-1",children:(m=i.phone_number.message)==null?void 0:m.toString()}),e.jsx("p",{className:"color-grey font-12 mt-2",children:"An OTP will be sent on given phone number for verification. Standard message and data rates apply."}),e.jsx("button",{className:"fill mt-3",onClick:p(h),disabled:c,children:c?"Continue...":"Continue"})]})]})]})};export{P as default};
