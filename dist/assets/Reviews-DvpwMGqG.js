import{d as j,r as o,c as y,j as e,e as u,A as v}from"./index-DEIqmbY-.js";import{d as l}from"./dayjs.min-CYIzaLsb.js";const R=()=>{const{service_id:r}=j(),[s,d]=o.useState([]),[a,c]=o.useState(0),n=y("reviews");o.useEffect(()=>{if(!r)return;(async()=>{n.setLoading(!0);try{const i=await v.post("/user/getServiceReviews",{service_id:r});if(i!=null&&i.data&&Array.isArray(i.data)&&(d(i.data),i.data.length>0)){const f=i.data.reduce((h,m)=>h+m.rating,0)/i.data.length;c(Math.round(f*10)/10)}}catch(i){console.log("Error fetching reviews:",i)}finally{n.setLoading(!1)}})()},[r]);const x=t=>({1:"ðŸ˜¡",2:"ðŸ˜’",3:"ðŸ™‚",4:"â˜ºï¸",5:"ðŸ¥³"})[t]||"ðŸ˜",p=t=>({1:"Very Bad",2:"Bad",3:"Good",4:"Very Good",5:"Excellent"})[t]||"No Rating",g=t=>t||"https://via.placeholder.com/40";return e.jsxs(e.Fragment,{children:[e.jsx(u,{}),n.loading&&e.jsxs("div",{className:"full-page-loader",children:[e.jsx("div",{className:"loader-spinner"}),e.jsx("p",{children:"Loading reviews..."})]}),e.jsxs("div",{className:"main-content-service2",children:[e.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px",margin:"16px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08)",textAlign:"center"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",color:"#333",fontSize:"20px"},children:"Customer Reviews"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"28px",fontWeight:"bold",color:"#2196F3"},children:a}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#999"},children:"Average Rating"})]}),e.jsx("div",{style:{fontSize:"24px"},children:[1,2,3,4,5].map(t=>e.jsx("span",{style:{color:t<=Math.round(a)?"#ffc107":"#ddd"},children:"â˜…"},t))}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"18px",fontWeight:"bold",color:"#333"},children:s.length}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#999"},children:"Total Reviews"})]})]})]}),e.jsx("div",{style:{padding:"16px"},children:s.length===0?e.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"40px 20px",borderRadius:"12px",textAlign:"center"},children:e.jsx("p",{style:{margin:0,color:"#999",fontSize:"14px"},children:"No reviews yet. Be the first to review!"})}):s.map(t=>e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e0e0e0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("img",{src:g(t.customer_id.profile_image),alt:t.customer_id.fname,style:{width:"44px",height:"44px",borderRadius:"50%",objectFit:"cover",backgroundColor:"#e0e0e0"},onError:i=>{i.target.src="https://via.placeholder.com/44"}}),e.jsxs("div",{children:[e.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"600",color:"#333"},children:[t.customer_id.fname," ",t.customer_id.lname]}),e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#999"},children:[l(t.created_on).format("MMM D, YYYY")," at ",l(t.created_on).format("h:mm A")]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"20px"},children:x(t.rating)}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"2px"},children:[1,2,3,4,5].map(i=>e.jsx("span",{style:{fontSize:"14px",color:i<=t.rating?"#ffc107":"#ddd"},children:"â˜…"},i))}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"11px",color:"#666"},children:p(t.rating)})]})]}),e.jsx("div",{style:{backgroundColor:"#fafafa",padding:"12px",borderRadius:"8px",borderLeft:"3px solid #2196F3",marginTop:"12px"},children:e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#555",lineHeight:"1.6"},children:t.review})}),e.jsxs("p",{style:{margin:"12px 0 0 0",fontSize:"11px",color:"#bbb",textAlign:"right"},children:["Booking: ",t.booking_id.bkng_id]})]},t._id))})]})]})};export{R as default};
