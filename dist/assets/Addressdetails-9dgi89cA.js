import{r as p,R as d,P as c,u as L,b as A,c as $,j as l,e as W,S as D,A as y,y as h}from"./index-DEIqmbY-.js";function v(){return v=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},v.apply(this,arguments)}function I(r,s){if(r==null)return{};var o=R(r,s),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function R(r,s){if(r==null)return{};var o={},t=Object.keys(r),n,a;for(a=0;a<t.length;a++)n=t[a],!(s.indexOf(n)>=0)&&(o[n]=r[n]);return o}var j=p.forwardRef(function(r,s){var o=r.color,t=o===void 0?"currentColor":o,n=r.size,a=n===void 0?24:n,f=I(r,["color","size"]);return d.createElement("svg",v({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},f),d.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),d.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))});j.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};j.displayName="Edit";function x(){return x=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},x.apply(this,arguments)}function T(r,s){if(r==null)return{};var o=M(r,s),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function M(r,s){if(r==null)return{};var o={},t=Object.keys(r),n,a;for(a=0;a<t.length;a++)n=t[a],!(s.indexOf(n)>=0)&&(o[n]=r[n]);return o}var w=p.forwardRef(function(r,s){var o=r.color,t=o===void 0?"currentColor":o,n=r.size,a=n===void 0?24:n,f=T(r,["color","size"]);return d.createElement("svg",x({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},f),d.createElement("circle",{cx:"12",cy:"12",r:"10"}),d.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),d.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});w.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};w.displayName="PlusCircle";function b(){return b=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},b.apply(this,arguments)}function B(r,s){if(r==null)return{};var o=H(r,s),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function H(r,s){if(r==null)return{};var o={},t=Object.keys(r),n,a;for(a=0;a<t.length;a++)n=t[a],!(s.indexOf(n)>=0)&&(o[n]=r[n]);return o}var O=p.forwardRef(function(r,s){var o=r.color,t=o===void 0?"currentColor":o,n=r.size,a=n===void 0?24:n,f=B(r,["color","size"]);return d.createElement("svg",b({ref:s,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},f),d.createElement("polyline",{points:"3 6 5 6 21 6"}),d.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});O.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};O.displayName="Trash2";const V=()=>{var P;const r=L(),s=A(),[o,t]=p.useState(!1),[n,a]=p.useState([]),[f,_]=p.useState(""),[z,u]=p.useState(!1),[m,E]=p.useState(""),g=$("address-list"),k=()=>{g.setLoading(!0),y.post("/user/getCustomerAddress",{store_id:f}).then(e=>{console.log(e.data),a(e.data)}).catch(e=>{console.log(e)}).finally(()=>{g.setLoading(!1)})};p.useEffect(()=>{k()},[f]),p.useEffect(()=>{var e,i;t(((e=s==null?void 0:s.state)==null?void 0:e.isSelected)||!1),_((i=s==null?void 0:s.state)==null?void 0:i.store_id)},[(P=s==null?void 0:s.state)==null?void 0:P.isSelected]);const S=()=>{m&&y.post("/user/deleteCustomerAddress",{address_id:m}).then(e=>{h.success(e.message),u(!1),k()}).catch(e=>{var i,N;console.log(e),h.error(((N=(i=e.response)==null?void 0:i.data)==null?void 0:N.message)||"Failed to delete address")})},C=e=>{if(e.delivery_status=="Does not deliver to"){h.error("Does not deliver to this address");return}else y.post("/user/setPrimaryAddress",{address_id:e==null?void 0:e._id}).then(i=>{h.success(i.message),localStorage.setItem("address",JSON.stringify(e)),r("/checkout")}).catch(i=>{console.log(i),h.error(i.response.data.message)})};return l.jsx(l.Fragment,{children:l.jsxs("div",{children:[l.jsx(W,{}),z&&l.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},children:l.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{background:"#fff",padding:"25px",borderRadius:"10px",width:"80%",maxWidth:"350px",textAlign:"center",position:"relative"},children:[l.jsx("span",{onClick:()=>u(!1),style:{position:"absolute",right:"12px",top:"10px",fontSize:"20px",cursor:"pointer",fontWeight:"bold"},children:"✖"}),l.jsx("h4",{children:"Delete Address"}),l.jsx("p",{className:"mt-2",children:"Are you sure you want to delete this address?"}),l.jsxs("div",{className:"d-flex justify-content-between mt-4",style:{gap:"10px"},children:[l.jsx("button",{className:"btn btn-light w-50",onClick:()=>u(!1),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"},children:"Cancel"}),l.jsx("button",{className:"btn btn-danger w-50",onClick:S,style:{padding:"10px",background:"red",color:"#fff",borderRadius:"6px",border:"none"},children:"Delete"})]})]})}),l.jsxs("div",{className:"main-content-service container",children:[l.jsx(D,{show:g.loading,size:"medium",text:"Loading address details...",overlay:!0}),l.jsxs("div",{className:"row px-2   ",children:[n==null?void 0:n.map(e=>l.jsx("div",{className:"col-12 mb-2",onClick:()=>{o?C(e):r("/authaddress",{state:{address:e}})},children:l.jsxs("div",{className:"cards5 d-block p-3",children:[l.jsxs("div",{className:"d-flex align-items-center w-100 justify-content-between",children:[l.jsx("b",{className:"font-14",children:e!=null&&e.is_primary?"Primary":"Secondary"}),l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx(j,{size:16,onClick:i=>{i.stopPropagation(),r("/authaddress",{state:{address:e}})},style:{cursor:"pointer"}}),l.jsx(O,{size:18,onClick:i=>{i.stopPropagation(),E(e._id),u(!0)},style:{marginLeft:12,color:"red",cursor:"pointer"}})]})]}),l.jsxs("div",{className:"pt-2",children:[l.jsxs("p",{className:"font-14 mb-1",children:[e==null?void 0:e.fname," ",e==null?void 0:e.lname]}),l.jsxs("p",{className:"font-14 color-grey mb-1",children:[e==null?void 0:e.country_code,e==null?void 0:e.phone_number]}),l.jsxs("p",{className:"font-14 color-grey mb-1",children:[e==null?void 0:e.street_1,", ",e==null?void 0:e.city,", ",e==null?void 0:e.state,","," ",e==null?void 0:e.country,", ",e==null?void 0:e.zip]}),e.delivery_status=="Does not deliver to"&&l.jsx("p",{className:"font-14 color-red",children:"Does not deliver to this address"})]})]})},e==null?void 0:e._id)),l.jsx("div",{className:"col-12 pt-2 ",style:{marginBottom:"100px"},children:l.jsxs("button",{className:"fill",onClick:()=>r("/authaddress",{state:{address:null}}),children:[l.jsx(w,{}),"  Add New Address"]})})]})]})]})})};export{V as default};
