const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-Ba1yWSbN.js","assets/index-DEIqmbY-.js","assets/index-C9m8BlpZ.css"])))=>i.map(i=>d[i]);
import{l as M,_ as S,G as b,r as y,j as a}from"./index-DEIqmbY-.js";import{u as R,A as N,G as O,M as U}from"./esm-4GqwfAtj.js";function z(e){e.CapacitorUtils.Synapse=new Proxy({},{get(r,t){return new Proxy({},{get(v,s){return(d,w,g)=>{const p=e.Capacitor.Plugins[t];if(p===void 0){g(new Error(`Capacitor plugin ${t} not found`));return}if(typeof p[s]!="function"){g(new Error(`Method ${s} not found in Capacitor plugin ${t}`));return}(async()=>{try{const n=await p[s](d);w(n)}catch(n){g(n)}})()}}})}})}function A(e){e.CapacitorUtils.Synapse=new Proxy({},{get(r,t){return e.cordova.plugins[t]}})}function K(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?z(window):window.cordova!==void 0&&A(window))}const E=M("Geolocation",{web:()=>S(()=>import("./web-Ba1yWSbN.js"),__vite__mapDeps([0,1,2])).then(e=>new e.GeolocationWeb)});K();const $={width:"100%",height:"50vh"},I=({location:e,setLocation:r,setAddress:t})=>{const{isLoaded:v}=R({googleMapsApiKey:b,libraries:["places"]}),s=y.useRef(null),d=y.useRef(null),[w,g]=y.useState(!1);y.useEffect(()=>{(async()=>{try{if(g(!0),(await E.requestPermissions()).location==="granted"){const c=await E.getCurrentPosition(),u=c.coords.latitude,m=c.coords.longitude;r({lat:u,lng:m}),new google.maps.Geocoder().geocode({location:{lat:u,lng:m}},(o,x)=>{var _,C,L,P,G;if(x==="OK"&&o&&o[0]){const j=o[0].formatted_address;d.current&&(d.current.value=j);const f=o[0].address_components||[];t({street_1:((_=f[0])==null?void 0:_.long_name)||"",city:((C=f.find(l=>l.types.includes("locality")))==null?void 0:C.long_name)||"",state:((L=f.find(l=>l.types.includes("administrative_area_level_1")))==null?void 0:L.long_name)||"",zip:((P=f.find(l=>l.types.includes("postal_code")))==null?void 0:P.long_name)||"",country:((G=f.find(l=>l.types.includes("country")))==null?void 0:G.long_name)||""})}})}else alert("Location permission not granted")}catch(i){console.error("Error fetching location:",i)}finally{g(!1)}})()},[r,t]);const p=()=>{var n,i,c,u,m,h;if(s.current){const o=s.current.getPlace();if((n=o.geometry)!=null&&n.location){const x=o.geometry.location.lat(),_=o.geometry.location.lng();r({lat:x,lng:_}),d.current.value=o.formatted_address||"",t({street_1:((i=o.address_components)==null?void 0:i[0].long_name)||"",city:((c=o.address_components)==null?void 0:c[1].long_name)||"",state:((u=o.address_components)==null?void 0:u[2].long_name)||"",zip:((m=o.address_components)==null?void 0:m[3].long_name)||"",country:((h=o.address_components)==null?void 0:h[4].long_name)||""})}}};return v?a.jsxs("div",{children:[a.jsx("div",{className:"mb-3",children:a.jsx(N,{onLoad:n=>s.current=n,onPlaceChanged:p,children:a.jsx("input",{ref:d,type:"text",placeholder:"Search for an address...",className:"npt"})})}),w&&a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Fetching location..."}),a.jsx(O,{mapContainerStyle:$,center:e||{lat:28.6139,lng:77.209},zoom:e?15:5,onClick:n=>{if(n.latLng){const i=n.latLng.lat(),c=n.latLng.lng();r({lat:i,lng:c})}},children:e&&a.jsx(U,{position:e,draggable:!0,onDragEnd:n=>{n.latLng&&r({lat:n.latLng.lat(),lng:n.latLng.lng()})}})})]}):a.jsx("div",{className:"text-center py-10",children:"Loading Google Maps..."})};export{I as G,E as a};
