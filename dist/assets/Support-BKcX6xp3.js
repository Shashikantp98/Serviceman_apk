import{u as f,a as q,r as y,j as e,H as A,e as w,A as F,y as x}from"./index-DEIqmbY-.js";import{c as E,b as k,a as j,u as D,I as b,o as H}from"./index.esm-CAr2bw5T.js";import{F as I}from"./FileInput-B9h8R-UV.js";import"./file-CP6wb8cz.js";const C=()=>{var m,d,p,u,h;const g=f(),{role:o}=q(),[a,r]=y.useState(!1),N=E({subject:j().required("Subject is required"),message:j().required("Message is required"),attachments:k().required("Attachments is required")}),{handleSubmit:S,formState:{errors:l},control:n,watch:i}=D({resolver:H(N)}),v=s=>{r(!0);const c=new FormData;c.append("subject",s.subject),c.append("message",s.message),s.attachments&&s.attachments.length>0&&c.append("attachments",s.attachments[0]),F.post("/user/createSupport",c).then(t=>{console.log(t),r(!1),x.success(t.message),g(-1)}).catch(t=>{console.log(t),x.error(t.response.data.message),r(!1)})};return e.jsxs(e.Fragment,{children:[o==="customer"?e.jsx(A,{}):e.jsx(w,{}),e.jsxs("div",{className:o==="customer"?"container main-content":"container main-content-service",children:[e.jsx("div",{className:"row px-2 pt-3",children:e.jsx("div",{className:"col-12 pt-2",children:e.jsx("h1",{className:"head4",children:"Support"})})}),e.jsxs("div",{className:"row px-2",children:[e.jsxs("div",{className:"col-12 pt-3",children:[e.jsx("label",{className:"lbl d-block ",children:"Subject"}),e.jsx(b,{control:n,name:"subject",label:"",type:"text",placeholder:"Enter subject",inputMode:"text",error:(d=(m=l.subject)==null?void 0:m.message)==null?void 0:d.toString(),disabled:a})]}),e.jsxs("div",{className:"col-12 pt-3",children:[e.jsx("label",{className:"lbl d-block",children:"Description"}),e.jsx(b,{control:n,name:"message",label:"",type:"text",placeholder:"Enter message",inputMode:"text",error:(u=(p=l.message)==null?void 0:p.message)==null?void 0:u.toString(),disabled:a})]}),e.jsxs("div",{className:"col-12 pt-3",children:[e.jsx("label",{className:"lbl",children:"Attachments"}),e.jsx(I,{name:"attachments",label:"",control:n,multiple:!1,error:(h=l.attachments)==null?void 0:h.message})]}),e.jsx("div",{className:"col-12 pt-2",style:{textAlign:"center"},children:i("attachments")&&e.jsx("img",{style:{height:"120px",width:"240px"},src:URL.createObjectURL(i("attachments")[0]),alt:"",className:"img-fluid"})}),e.jsx("div",{className:"col-12 pt-3",style:{marginBottom:"120px"},children:e.jsx("button",{className:"fill",onClick:S(v),disabled:a,children:a?"Submitting...":"Submit"})})]})]})]})};export{C as default};
